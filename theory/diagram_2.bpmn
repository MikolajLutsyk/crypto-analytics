<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_0hprbrz" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="5.36.0" modeler:executionPlatform="Camunda Cloud" modeler:executionPlatformVersion="8.7.0">
  <bpmn:collaboration id="Collaboration_0gf4hc7">
    <bpmn:participant id="Participant_0vjpblt" name="Proces zbierania danych" processRef="Process_153vty0" />
  </bpmn:collaboration>
  <bpmn:process id="Process_153vty0" isExecutable="true">
    <bpmn:startEvent id="StartEvent_1" name="Uruchomienie kolektora">
      <bpmn:outgoing>Flow_0tad6tq</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:task id="Activity_1n5kbd3" name="Połączenie z zewnętrznym API">
      <bpmn:incoming>Flow_0tad6tq</bpmn:incoming>
      <bpmn:outgoing>Flow_0o51b8v</bpmn:outgoing>
    </bpmn:task>
    <bpmn:exclusiveGateway id="Gateway_0vzqby9" name="Czy API odpowiada poprawnie?">
      <bpmn:incoming>Flow_0o51b8v</bpmn:incoming>
      <bpmn:outgoing>Flow_1z12nom</bpmn:outgoing>
      <bpmn:outgoing>Flow_0nc825u</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:task id="Activity_17tixkd" name="Pobiór danych">
      <bpmn:incoming>Flow_1z12nom</bpmn:incoming>
      <bpmn:outgoing>Flow_0wu6zq5</bpmn:outgoing>
      <bpmn:property id="Property_1m5xbgd" name="__targetRef_placeholder" />
      <bpmn:dataInputAssociation id="DataInputAssociation_1yf9wjx">
        <bpmn:sourceRef>DataStoreReference_1xjzz3h</bpmn:sourceRef>
        <bpmn:targetRef>Property_1m5xbgd</bpmn:targetRef>
      </bpmn:dataInputAssociation>
    </bpmn:task>
    <bpmn:task id="Activity_1umbrw9" name="Obsługa błędu API">
      <bpmn:incoming>Flow_0nc825u</bpmn:incoming>
      <bpmn:outgoing>Flow_0g5gz15</bpmn:outgoing>
    </bpmn:task>
    <bpmn:task id="Activity_1aztyxd" name="Przetwarzanie danych">
      <bpmn:incoming>Flow_0wu6zq5</bpmn:incoming>
      <bpmn:outgoing>Flow_1izcmro</bpmn:outgoing>
    </bpmn:task>
    <bpmn:task id="Activity_16u6z2w" name="Sprawdzenie istnienie danych w bazie">
      <bpmn:incoming>Flow_1izcmro</bpmn:incoming>
      <bpmn:outgoing>Flow_1qe2i2i</bpmn:outgoing>
    </bpmn:task>
    <bpmn:exclusiveGateway id="Gateway_1ne49na" name="Czy są nowe dane do zapisu?">
      <bpmn:incoming>Flow_1qe2i2i</bpmn:incoming>
      <bpmn:outgoing>Flow_0v9m666</bpmn:outgoing>
      <bpmn:outgoing>Flow_04xp83r</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:task id="Activity_0a00gix" name="Zapis danych do bazy">
      <bpmn:incoming>Flow_0v9m666</bpmn:incoming>
      <bpmn:outgoing>Flow_17c1h3o</bpmn:outgoing>
      <bpmn:dataOutputAssociation id="DataOutputAssociation_1shrtbo">
        <bpmn:targetRef>DataStoreReference_1tzk99i</bpmn:targetRef>
      </bpmn:dataOutputAssociation>
    </bpmn:task>
    <bpmn:endEvent id="Event_1tnlsnr">
      <bpmn:incoming>Flow_0g5gz15</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:endEvent id="Event_04k62s7">
      <bpmn:incoming>Flow_17c1h3o</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:dataStoreReference id="DataStoreReference_1tzk99i" name="Baza danych" />
    <bpmn:dataStoreReference id="DataStoreReference_1xjzz3h" name="API zewnętrzne" />
    <bpmn:endEvent id="Event_1wj1rvo">
      <bpmn:incoming>Flow_04xp83r</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_0tad6tq" sourceRef="StartEvent_1" targetRef="Activity_1n5kbd3" />
    <bpmn:sequenceFlow id="Flow_0o51b8v" sourceRef="Activity_1n5kbd3" targetRef="Gateway_0vzqby9" />
    <bpmn:sequenceFlow id="Flow_1z12nom" name="Tak" sourceRef="Gateway_0vzqby9" targetRef="Activity_17tixkd" />
    <bpmn:sequenceFlow id="Flow_0nc825u" name="Nie" sourceRef="Gateway_0vzqby9" targetRef="Activity_1umbrw9" />
    <bpmn:sequenceFlow id="Flow_0wu6zq5" sourceRef="Activity_17tixkd" targetRef="Activity_1aztyxd" />
    <bpmn:sequenceFlow id="Flow_0g5gz15" sourceRef="Activity_1umbrw9" targetRef="Event_1tnlsnr" />
    <bpmn:sequenceFlow id="Flow_1izcmro" sourceRef="Activity_1aztyxd" targetRef="Activity_16u6z2w" />
    <bpmn:sequenceFlow id="Flow_1qe2i2i" sourceRef="Activity_16u6z2w" targetRef="Gateway_1ne49na" />
    <bpmn:sequenceFlow id="Flow_0v9m666" name="Tak" sourceRef="Gateway_1ne49na" targetRef="Activity_0a00gix" />
    <bpmn:sequenceFlow id="Flow_04xp83r" name="Nie" sourceRef="Gateway_1ne49na" targetRef="Event_1wj1rvo" />
    <bpmn:sequenceFlow id="Flow_17c1h3o" sourceRef="Activity_0a00gix" targetRef="Event_04k62s7" />
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_0gf4hc7">
      <bpmndi:BPMNShape id="Participant_0vjpblt_di" bpmnElement="Participant_0vjpblt" isHorizontal="true">
        <dc:Bounds x="130" y="83" width="1230" height="420" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="StartEvent_1_di" bpmnElement="StartEvent_1">
        <dc:Bounds x="182" y="332" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="166" y="375" width="68" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1n5kbd3_di" bpmnElement="Activity_1n5kbd3">
        <dc:Bounds x="270" y="310" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0vzqby9_di" bpmnElement="Gateway_0vzqby9" isMarkerVisible="true">
        <dc:Bounds x="425" y="325" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="502" y="340" width="57" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_17tixkd_di" bpmnElement="Activity_17tixkd">
        <dc:Bounds x="530" y="220" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1umbrw9_di" bpmnElement="Activity_1umbrw9">
        <dc:Bounds x="520" y="400" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1aztyxd_di" bpmnElement="Activity_1aztyxd">
        <dc:Bounds x="690" y="220" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_16u6z2w_di" bpmnElement="Activity_16u6z2w">
        <dc:Bounds x="850" y="220" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1ne49na_di" bpmnElement="Gateway_1ne49na" isMarkerVisible="true">
        <dc:Bounds x="1015" y="235" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1000" y="205" width="81" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0a00gix_di" bpmnElement="Activity_0a00gix">
        <dc:Bounds x="1130" y="220" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1tnlsnr_di" bpmnElement="Event_1tnlsnr">
        <dc:Bounds x="672" y="422" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_04k62s7_di" bpmnElement="Event_04k62s7">
        <dc:Bounds x="1302" y="242" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="DataStoreReference_1tzk99i_di" bpmnElement="DataStoreReference_1tzk99i">
        <dc:Bounds x="1245" y="115" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1238" y="172" width="64" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="DataStoreReference_1xjzz3h_di" bpmnElement="DataStoreReference_1xjzz3h">
        <dc:Bounds x="475" y="115" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="462" y="172" width="77" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1wj1rvo_di" bpmnElement="Event_1wj1rvo">
        <dc:Bounds x="1162" y="352" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_0tad6tq_di" bpmnElement="Flow_0tad6tq">
        <di:waypoint x="218" y="350" />
        <di:waypoint x="270" y="350" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0o51b8v_di" bpmnElement="Flow_0o51b8v">
        <di:waypoint x="370" y="350" />
        <di:waypoint x="425" y="350" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1z12nom_di" bpmnElement="Flow_1z12nom">
        <di:waypoint x="450" y="325" />
        <di:waypoint x="450" y="260" />
        <di:waypoint x="530" y="260" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="457" y="290" width="17" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0nc825u_di" bpmnElement="Flow_0nc825u">
        <di:waypoint x="450" y="375" />
        <di:waypoint x="450" y="440" />
        <di:waypoint x="520" y="440" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="457" y="405" width="17" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0wu6zq5_di" bpmnElement="Flow_0wu6zq5">
        <di:waypoint x="630" y="260" />
        <di:waypoint x="690" y="260" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0g5gz15_di" bpmnElement="Flow_0g5gz15">
        <di:waypoint x="620" y="440" />
        <di:waypoint x="672" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1izcmro_di" bpmnElement="Flow_1izcmro">
        <di:waypoint x="790" y="260" />
        <di:waypoint x="850" y="260" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1qe2i2i_di" bpmnElement="Flow_1qe2i2i">
        <di:waypoint x="950" y="260" />
        <di:waypoint x="1015" y="260" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0v9m666_di" bpmnElement="Flow_0v9m666">
        <di:waypoint x="1065" y="260" />
        <di:waypoint x="1130" y="260" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1089" y="242" width="17" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_04xp83r_di" bpmnElement="Flow_04xp83r">
        <di:waypoint x="1040" y="285" />
        <di:waypoint x="1040" y="370" />
        <di:waypoint x="1162" y="370" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1054" y="353" width="17" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_17c1h3o_di" bpmnElement="Flow_17c1h3o">
        <di:waypoint x="1230" y="260" />
        <di:waypoint x="1302" y="260" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataOutputAssociation_1shrtbo_di" bpmnElement="DataOutputAssociation_1shrtbo">
        <di:waypoint x="1210" y="220" />
        <di:waypoint x="1250" y="165" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataInputAssociation_1yf9wjx_di" bpmnElement="DataInputAssociation_1yf9wjx">
        <di:waypoint x="519" y="165" />
        <di:waypoint x="560" y="220" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
